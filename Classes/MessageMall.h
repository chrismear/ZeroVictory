#import <Cocoa/Cocoa.h>

@class InvocationQueue, MessageCriterion;

@protocol MessageConsumer <NSObject>
- (void)newMessagesAvailable:(id)arg1;
- (void)newMessagesAvailable:(id)arg1 ranks:(id)arg2;
- (BOOL)shouldCancel;
@end


@interface MessageMall : NSObject <MessageConsumer>
{
    InvocationQueue *_filterTasks;
    InvocationQueue *_userTasks;
    BOOL _sortedAscending;
    BOOL _wantsToBeSortedAscending;
    BOOL _includeDeleted;
    BOOL _focused;
    BOOL _showingSearchResults;
    BOOL _searchTaskIsRunning;
    BOOL _isInThreadedMode;
    BOOL _wantsToBeInThreadedMode;
    BOOL _postedSearchFinished;
    BOOL _displayingToColumn;
    BOOL _selectionIncludesSmartMailbox;
    int _activeSearchField;
    int _activeSearchTarget;
    int _currentSearchID;
    int _currentFilterSeriesID;
    NSString *_displayName;
    NSMutableArray *_selectedMailboxUids;
    NSMutableArray *_allStores;
    NSMutableDictionary *_allMessagesByStore;
    NSMutableSet *_allNonDeletedMessagesSet;
    NSMutableDictionary *_sortedMessagesByStore;
    NSMutableDictionary *_sortedNonDeletedMessagesByStore;
    NSMutableArray *_filteredMessages;
    NSMutableArray *_filteredThreads;
    NSMutableSet *_hiddenMessages;
    NSMutableSet *_undeletedMessages;
    NSMutableSet *_focusedMessages;
    NSMutableDictionary *_searchRanks;
    double _highestSearchRank;
    MessageCriterion *_activeSearchCriterion;
    NSMutableSet *_deletedSearchResults;
    NSMutableSet *_storesBeingOpened;
    NSString *_sortOrder;
    NSMutableDictionary *_messageThreadingDataByMessage;
    NSMutableDictionary *_messagesByMessageIDHeaderDigest;
    NSMutableDictionary *_messagesByInReplyToHeaderDigest;
    NSMutableDictionary *_messagesBySubject;
    NSMutableDictionary *_messagesByID;
    NSMutableSet *_searchMonitors;
    NSMutableArray *_sortedFilteredMessages;
    NSMutableArray *_mailboxUidsToSetAfterDelay;
}

+ (id)allMessageMalls;
+ (void)registerMall:(id)arg1;
+ (void)deregisterMall:(id)arg1;
- (id)init;
- (void)unregisterForNotifications;
- (void)dealloc;
- (BOOL)isOpened;
- (BOOL)filteredListIncludesAllMessages;
- (long long)filteredMessagesCount;
- (id)filteredMessageAtIndex:(unsigned long long)arg1;
- (id)filteredMessagesAtIndexes:(id)arg1;
- (id)filteredMessages;
- (id)filteredMessagesInRange:(struct _NSRange)arg1;
- (void)setupRowDrawingInfo:(struct __CFDictionary *)arg1;
- (void)setSortedFilteredMessages:(id)arg1;
- (unsigned long long)indexOfMessageByLibraryID:(id)arg1;
- (BOOL)selectionIncludesSmartMailbox;
- (BOOL)useLibraryIDNumbering;
- (id)_sortedMessagesForStore:(id)arg1;
- (unsigned long long)_indexOfMessage:(id)arg1 inStore:(id)arg2 messages:(id)arg3;
- (unsigned long long)indexOfMessage:(id)arg1;
- (id)numberForMessage:(id)arg1;
- (long long)indexOfFilteredDocument:(id)arg1;
- (long long)indexOfFilteredMessage:(id)arg1;
- (id)filteredThreads;
- (void)clearFilteredMessages;
- (void)setFocused:(BOOL)arg1;
- (BOOL)isFocused;
- (void)setFocusedMessages:(id)arg1;
- (void)_setFocusedMessages:(id)arg1;
- (void)setShowingSearchResults:(BOOL)arg1;
- (BOOL)isShowingSearchResults;
- (int)currentSearchField;
- (int)currentSearchTarget;
- (void)setSortOrder:(id)arg1 ascending:(BOOL)arg2;
- (id)sortOrder;
- (void)sortMessages:(id)arg1;
- (BOOL)includeDeleted;
- (void)setIncludeDeleted:(BOOL)arg1;
- (BOOL)isSortedAscending;
- (BOOL)isSortedByDateReceived;
- (void *)sortFunction;
- (id)expandedMailboxes:(id)arg1;
- (void)_loadDelayedMailboxes;
- (void)setMailboxUids:(id)arg1;
- (void)_setMailboxUids:(id)arg1;
- (void)_addNonDeletedMessagesInArray:(id)arg1 fromStore:(id)arg2;
- (id)_storeForMailbox:(id)arg1 cache:(id)arg2;
- (void)_removeDeletedMessagesInArray:(id)arg1;
- (void)_removeMessagesInStores:(id)arg1 fromMessages:(id)arg2 storeCache:(id)arg3;
- (void)_rebuildNonDeletedMessagesForStoresOfMessagesInArray:(id)arg1;
- (id)_addStore:(id)arg1 shouldReturnRetainedMessages:(BOOL)arg2;
- (void)_filterInMessages:(id)arg1;
- (void)_filterInMessagesSynchronously:(id)arg1;
- (void)_filterOutMessages:(id)arg1 ignoreShowDeletedPreference:(BOOL)arg2;
- (BOOL)_filterOutMessagesSynchronously:(id)arg1;
- (void)_resortUsingFunction:(void *)arg1;
- (void)_refilter;
- (void)_invertFilteredList;
- (id)_backgroundInvertFilteredList;
- (void)_gatherCountsFromStoresForTotalCount:(unsigned long long *)arg1 totalSize:(unsigned long long *)arg2 deletedCount:(unsigned long long *)arg3 deletedSize:(unsigned long long *)arg4;
- (void)getTotalCount:(unsigned long long *)arg1 totalSize:(unsigned long long *)arg2 deletedCount:(unsigned long long *)arg3 deletedSize:(unsigned long long *)arg4;
- (unsigned long long)totalCount;
- (unsigned long long)unreadCount;
- (void)hideMessages:(id)arg1;
- (void)unhideMessages:(id)arg1;
- (void)rebuildTableOfContentsAsynchronously;
- (void)structureDidChange;
- (void)structureDidChangeFromOpeningThread:(id)arg1 andSelectMessage:(id)arg2 animate:(BOOL)arg3;
- (void)structureDidChangeByClosingThread:(id)arg1 focusRow:(long long)arg2 animate:(BOOL)arg3;
- (void)structureDidChangeWithChangedThreads:(id)arg1;
- (id)threadForMessageID:(id)arg1;
- (void)updateFilteredListForMessages:(id)arg1 flags:(id)arg2 realFlagChange:(BOOL)arg3;
- (void)setFlag:(id)arg1 state:(BOOL)arg2 forMessages:(id)arg3;
- (void)setFlagsFromDictionary:(id)arg1 forMessages:(id)arg2;
- (void)setJunkMailLevel:(int)arg1 forMessages:(id)arg2 trainJunkMailDatabase:(BOOL)arg3;
- (void)setJunkMailLevel:(int)arg1 forMessages:(id)arg2;
- (BOOL)canCompact;
- (void)doCompact;
- (id)_storesToRebuild;
- (BOOL)canRebuild;
- (void)_updateDisplayName;
- (id)criterionForString:(id)arg1 type:(int)arg2 scope:(int)arg3;
- (id)threadSearchSequenceNumber;
- (BOOL)shouldCancel;
- (void)newMessagesAvailable:(id)arg1 ranks:(id)arg2;
- (void)newMessagesAvailable:(id)arg1;
- (void)filterInLibrarySearchResults:(id)arg1 ranks:(id)arg2 sequenceNumber:(id)arg3;
- (id)mailboxSearchCriterionForScope:(int)arg1;
- (id)criterionForDateWithin:(id)arg1 and:(id)arg2 withType:(int)arg3;
- (id)compoundCriterionWithCriterion:(id)arg1 andAnyDateMatchingQuery:(id)arg2;
- (id)textSearchCriterionForSearchField:(int)arg1 queryString:(id)arg2 includeDateTextualRepresentations:(BOOL)arg3;
- (void)searchForCriterion:(id)arg1;
- (void)searchForString:(id)arg1 in:(int)arg2 withOptions:(int)arg3;
- (void)reallySearchWithCriterion:(id)arg1 ID:(long long)arg2;
- (void)_cancelSearch;
- (void)setSearching:(BOOL)arg1;
- (BOOL)isSearching;
- (double)searchRankForMessage:(id)arg1;
- (id)mailboxUid;
- (id)allMailboxUids;
- (id)selectedMailboxUids;
- (void)messageColorsNeedToBeReevaluated;
- (BOOL)isReadOnly;
- (id)stores;
- (long long)compareByNumberMessage:(id)arg1 andMessage:(id)arg2 sortedAscending:(BOOL)arg3;
- (BOOL)deletedFlagForMessage:(id)arg1;
- (BOOL)_deletedFlagForMessage:(id)arg1 hiddenMessages:(id)arg2 undeletedMessages:(id)arg3;
- (BOOL)_shouldDisplayMessage:(id)arg1 hiddenMessages:(id)arg2 undeletedMessages:(id)arg3;
- (id)_messagesThatShouldBeDisplayed:(id)arg1 hiddenMessages:(id)arg2 undeletedMessages:(id)arg3;
- (void)_componentMessageFlagsChanged:(id)arg1;
- (void)_componentStoreWillOpen:(id)arg1;
- (void)_componentStoreDidOpen:(id)arg1;
- (void)_componentStoreStructureChanged:(id)arg1;
- (void)reload:(id)arg1;
- (void)_componentStoreMessagesWereUpdated:(id)arg1;
- (void)_backgroundHandleMessagesUpdated:(id)arg1;
- (void)_componentStoreFinishedLoading:(id)arg1;
- (void)_componentStoreMessagesWereAdded:(id)arg1;
- (void)_backgroundHandleMessagesAdded:(id)arg1;
- (void)_componentStoreMessagesCompacted:(id)arg1;
- (void)_performFilterTask:(id)arg1 seriesID:(long long)arg2;
- (void)_addTaskToFilterQueue:(id)arg1;
- (void)_resetFilterQueue;
- (void)_filterTaskCompleted:(id)arg1 seriesID:(long long)arg2;
- (void)structureWillChangeFromOpeningThread:(id)arg1;
- (void)structureWillChangeFromClosingThread:(id)arg1 focusRow:(long long)arg2 animate:(BOOL)arg3;
- (void)structureWillChange;
- (id)_backgroundResortUsingSortFunction:(void *)arg1;
- (void)_removeMembersOfOpenThreads:(id)arg1;
- (id)_insertMembersOfOpenThreads:(id)arg1 usingSortFunction:(void *)arg2 context:(struct _MessageSortingInformation)arg3;
- (id)_backgroundRefilterMessages:(id)arg1 stores:(id)arg2;
- (id)_backgroundMergeMessages:(id)arg1;
- (id)_backgroundSortNewFilteredMessages:(id)arg1;
- (void)_removeThreadedMessagesIn:(id)arg1 from:(id)arg2;
- (void)_mergeMessages:(id)arg1 intoMessages:(id)arg2 newThreads:(id *)arg3 changedThreads:(id *)arg4 usingComparator:(void *)arg5;
- (id)_backgroundFilterOutMessages:(id)arg1 ignoreShowDeletedPreference:(BOOL)arg2;
- (BOOL)isInThreadedMode;
- (void)setIsInThreadedMode:(BOOL)arg1;
- (void)toggleThreadedMode;
- (BOOL)needThreadingInfo;
- (void)setDisplayingToColumn:(BOOL)arg1;
- (BOOL)needTo;
- (unsigned int)loadOptions;
- (id)_backgroundResetThreadInfoAndGroupByThread;
- (id)_backgroundGroupMessagesByThread;
- (id)_backgroundUngroupThreads;
- (BOOL)openThreadAtIndex:(long long)arg1 andSelectMessage:(id)arg2 animate:(BOOL)arg3;
- (id)quietlyOpenThreadAtIndex:(unsigned long long)arg1;
- (BOOL)closeThreadAtIndex:(long long)arg1 focusRow:(long long)arg2 animate:(BOOL)arg3;
- (id)quietlyCloseThreadAtIndex:(unsigned long long)arg1;
- (void)openThreadsWithIDs:(id)arg1;
- (void)openAllThreads;
- (void)closeAllThreads;
- (BOOL)loadFullThreadsForMessages:(id)arg1;
- (void)_setFilteredMessages:(id)arg1;
- (void)_setFilteredMessages:(id)arg1 changedMessages:(id)arg2 filteredThreads:(id)arg3 changedThreads:(id)arg4 changedFlags:(id)arg5 messagesFilteredIn:(id)arg6 messagesFilteredOut:(id)arg7 forSeriesID:(long long)arg8;
- (void)routeMessages:(id)arg1;
- (void)routeMessages:(id)arg1 fromStores:(id)arg2;
- (void)_unlockedAddMessagesInSameThreadAsMessage:(id)arg1 toSetOrArray:(id)arg2;
- (void)addMessagesInSameThreadAsMessage:(id)arg1 toSet:(id)arg2;
- (id)repliesToMessage:(id)arg1;
- (id)parentOfMessage:(id)arg1;
- (BOOL)messageIsPartOfAThread:(id)arg1;
- (id)messageForMessageID:(id)arg1;
- (id)threadForMessage:(id)arg1;
- (id)threadAtIndex:(unsigned long long)arg1;
- (id)filteredThreadForMessage:(id)arg1;
- (id)unfilteredThreadForMessage:(id)arg1;
- (id)filteredThreadsForMessages:(id)arg1;
- (void)_deduceThreadHierarchyForMessages:(id)arg1 firstTime:(BOOL)arg2;
- (void)_clearThreadInfo;
- (void)updateThreadingDictionaryForMessages:(id)arg1;
- (void)_resetThreadInfoFromFilteredMessages;
- (void)_updateThreadInfoForMessages:(id)arg1;
- (long long)_appendDescriptionOfDictionaryMemoryUsage:(id)arg1 named:(id)arg2 toString:(id)arg3;
- (id)memoryUsageDescription;
@property(retain, nonatomic) NSArray *mailboxUidsToSetAfterDelay; // @synthesize mailboxUidsToSetAfterDelay=_mailboxUidsToSetAfterDelay;
@property(copy) NSString *displayName; // @synthesize displayName=_displayName;

@end
